# bits 테스트 

## 단위 테스트 

약간 역으로 다시 구성하고 있지만 새로 만든다고 생각하고 꼼꼼하게 테스트를 작성한다. 역과정은 흔히 생긴다. 


## test_bits_protocol 

net 계층에서 가장 중요한 마무리이다. 사용성을 결정하기 때문에 좋은 방법을 찾아야 한다. 

- 시스템 메세지 처리 
  - tcp_node에서 bits_node에 통지할 것을 알림 
  - bits_node에 채널 연결하고 받는다. 

- 내부 메세지 처리 구현 
- loopback 구현 
- 테스트 진행 


### topic 정의 


### 배포 기능 

시스템 기본 메세지에 대해 전파할 필요가 있어 node에 프로토콜처럼 채널 연결 기능을 넣는다. 
다른 메세지들도 이쪽에 통지를 할까? 선택할 수 있게 할까? 

채널을 연결하면 대체로 깔끔해진다. 


## 인터페이스 개선 

listen, connect 단순화. 노드 단위로 프로토콜 설정. 사용성이 그렇게 되어도 된다. 그리고, 그렇게 구현될 수 밖에 없다. 여기에 관련된 수학은 무엇일까? 대수적인 시스템이다. 


## 빌드와 인터페이스 개선 

- node 생성
- bits_protocol 테스트 생성 


## loopback 추가 

채널을 사용하는 인터페이스는 상당히 괜찮아 보인다. 외부에 제어권을 넘기면서 구현도 
간결해지는 부분이 많다. 

이제 테스트!!!

## fixed_size_buffer_pool 

buffer를 추적 가능하도록 했다. 사용할 때 실수를 줄일 수 있게 한다. 
실수하면 빨리 알게 한다. 

## segment_buffer와 object_pool 

일정 크기를 갖는 세그먼트와 이들의 object_pool<segment>로 같은 크기 오브젝트들을 관리한다. 
static으로 풀을 공유하게 만들었는데 이 때문에 종료 시 로거보다 나중에 소멸하고 
로거를 참조하는 경우에 이슈가 된다. 

## modifiers

protocol에서 분리했다. 이건 대단한 일이다. 별도로 단위 테스트가 가능하다. 
다른 modifier 추가도 쉬워졌다. 

## bits_packer 

이전에 작성한 테스트까지 완료 


